"use strict";(self["webpackChunksegware_book"]=self["webpackChunksegware_book"]||[]).push([[270],{6270:(e,l,a)=>{a.r(l),a.d(l,{default:()=>F});var t=a(3673),o=a(2323);const r={class:"q-pa-md col-12"},s={class:"q-pa-md"},n=(0,t.Uk)(),i=(0,t._)("br",null,null,-1),d=(0,t._)("br",null,null,-1),c={class:"q-pa-xs q-mb-md col-12"},u={class:"q-pa-lg"},m=(0,t._)("br",null,null,-1),p={key:0},w={key:1},f={key:2,class:"q-pl-md"},k={key:3,class:"q-pl-md"},g={class:"float-right"};function h(e,l,a,h,b,v){const q=(0,t.up)("q-input"),_=(0,t.up)("q-btn"),W=(0,t.up)("q-separator"),C=(0,t.up)("q-card-section"),x=(0,t.up)("q-icon"),I=(0,t.up)("q-card"),U=(0,t.up)("q-table"),Z=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(Z,null,{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("div",s,[(0,t.Wm)(q,{modelValue:e.text,"onUpdate:modelValue":l[0]||(l[0]=l=>e.text=l),filled:"",autogrow:"",type:"textarea",placeholder:"O que você quer contar para o mundo?",color:"green"},null,8,["modelValue"]),(0,t.Wm)(_,{class:"q-mt-md float-right",color:"green",label:"Publicar",onClick:l[1]||(l[1]=l=>e.publicar())}),n,i,d]),(0,t.Wm)(W,{class:"q-mt-md q-mb-md"}),(0,t.Wm)(U,{grid:"","card-class":"card",title:"Todas as publicações",rows:e.feeds,columns:e.columns,"row-key":"id",filter:e.filter,"hide-header":"",loading:e.loading,"rows-per-page-options":[10,20,30,0],"no-data-label":"Não encontrei nada para você","no-results-label":"Nenhum item corresponde a busca"},{item:(0,t.w5)((l=>[(0,t._)("div",c,[(0,t.Wm)(I,{class:"q-pa-xs bg-green-1"},{default:(0,t.w5)((()=>[(0,t._)("strong",u,(0,o.zw)(l.row.author.username),1),(0,t.Wm)(W),(0,t.Wm)(C,{class:"text-left",style:{"white-space":"pre-wrap"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.row.content)+" ",1),m])),_:2},1024),(0,t.Wm)(W),(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[0==l.row.activeUserLovedIt?((0,t.wg)(),(0,t.iD)("span",p,[(0,t.Wm)(x,{class:"cursor-pointer",color:"negative",name:"favorite_border",onClick:a=>e.love(l.row.id)},null,8,["onClick"]),(0,t.Uk)(" "+(0,o.zw)(l.row.loves),1)])):((0,t.wg)(),(0,t.iD)("span",w,[(0,t.Wm)(x,{class:"cursor-pointer",color:"negative",name:"favorite",onClick:a=>e.deslove(l.row.id)},null,8,["onClick"]),(0,t.Uk)(" "+(0,o.zw)(l.row.loves),1)])),0==l.row.activeUserLikedIt?((0,t.wg)(),(0,t.iD)("span",f,[(0,t.Wm)(x,{class:"cursor-pointer",color:"green",name:"thumb_up_off_alt",onClick:a=>e.like(l.row.id)},null,8,["onClick"]),(0,t.Uk)(" "+(0,o.zw)(l.row.likes),1)])):((0,t.wg)(),(0,t.iD)("span",k,[(0,t.Wm)(x,{class:"cursor-pointer",color:"green",name:"thumb_up_alt",onClick:a=>e.deslike(l.row.id)},null,8,["onClick"]),(0,t.Uk)(" "+(0,o.zw)(l.row.likes),1)])),(0,t._)("span",g,(0,o.zw)(Date(l.row.createdAt).split(" ")[2]+"/"+Date(l.row.createdAt).split(" ")[1]+"/"+Date(l.row.createdAt).split(" ")[3]),1)])),_:2},1024)])),_:2},1024)])])),"top-right":(0,t.w5)((()=>[(0,t.Wm)(q,{dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[2]||(l[2]=l=>e.filter=l),placeholder:"Pesquisar",color:"green"},{append:(0,t.w5)((()=>[(0,t.Wm)(x,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter","loading"])])])),_:1})}var b=a(5474);const v=(0,t.aZ)({name:"PageIndex",data(){return{feeds:[],columns:[{name:"id",label:"Id",align:"left",field:"id"},{name:"content",align:"left",label:"Content",field:"content"},{name:"createdAt",align:"left",label:"Data",field:"createdAt"},{name:"likes",label:"Likes",field:"likes"},{name:"loves",label:"Loves",field:"loves"},{name:"author",label:"Author",field:"author"}],filter:"",text:"",loading:!0}},methods:{publicar(){let e={content:this.text};b["default"].publicar(e).then((e=>{201==e.status&&(this.text="",this.listarFeed())}))},deslogar(){sessionStorage.clear(),window.location.href="/#/login"},like(e){let l={feedId:e,like:!0,love:!1};b["default"].like(l).then((e=>{this.listarFeed()}))},deslike(e){let l={feedId:e,like:!1};b["default"].like(l).then((e=>{this.listarFeed()}))},love(e){let l={feedId:e,love:!0,like:!1};b["default"].love(l).then((e=>{this.listarFeed()}))},deslove(e){let l={feedId:e,love:!1};b["default"].love(l).then((e=>{this.listarFeed()}))},listarFeed(){b["default"].feed().then((e=>{this.feeds=e.data,this.loading=!1})).catch((e=>{sessionStorage.clear(),window.location.href="/#/login"}))}},mounted(){this.listarFeed()}});var q=a(4260),_=a(4379),W=a(4842),C=a(4607),x=a(5869),I=a(9961),U=a(151),Z=a(5589),D=a(4554),Q=a(7518),y=a.n(Q);const z=(0,q.Z)(v,[["render",h]]),F=z;y()(v,"components",{QPage:_.Z,QInput:W.Z,QBtn:C.Z,QSeparator:x.Z,QTable:I.Z,QCard:U.Z,QCardSection:Z.Z,QIcon:D.Z})}}]);